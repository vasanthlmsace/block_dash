{"version":3,"file":"dash_instance.min.js","sources":["../src/dash_instance.js"],"sourcesContent":["define(['jquery', 'jqueryui', 'core/log', 'core/ajax', 'core/notification', 'core/modal_events',\r\n    'block_dash/preferences_modal', 'block_dash/datepicker', 'block_dash/select2', 'core/fragment', 'core/templates'],\r\n    function ($, UI, Log, Ajax, Notification, ModalEvents, PreferencesModal, DatePicker, Select2, Fragment, Templates) {\r\n\r\n        var DashInstance = function (root, blockInstanceId, blockContextid, editing, istotara, pagelayout,\r\n            pagecontext, sortDirections = {}) {\r\n\r\n            this.root = $(root);\r\n            this.blockInstanceId = blockInstanceId;\r\n            this.blockContextid = blockContextid;\r\n            this.currentPage = 0;\r\n            this.blockPreferencesModal = null;\r\n            this.editing = editing;\r\n            this.sortField = null;\r\n            this.sortDirections = sortDirections || {};\r\n            this.isTotara = istotara;\r\n            this.pageLayout = pagelayout;\r\n            this.pageContext = pagecontext;\r\n            this.init();\r\n        };\r\n\r\n        DashInstance.prototype.BLOCK_CONTENT_SELECTOR = '.dash-block-content';\r\n        DashInstance.prototype.FILTER_FORM_SELECTOR = '.filter-form';\r\n\r\n        DashInstance.prototype.init = function () {\r\n\r\n            // Select datasource for configuration.\r\n            if (this.getRoot().find('.dash-configuration-form').length > 0) {\r\n\r\n                this.getRoot().find('.dash-configuration-form').removeClass('hide');\r\n                this.getRoot()\r\n                    .find('[data-target=\"subsource-config\"] [type=radio], [name=\"config_data_source_idnumber\"]')\r\n                    .addClass('norefresh');\r\n\r\n                // Hide the preference link for others.\r\n                this.getRoot().find('.dash-edit-preferences').hide();\r\n\r\n                // Select the parent datasource for the sub config.\r\n                this.getRoot().on('change', '[data-target=\"subsource-config\"] [type=radio]', function (e) {\r\n                    var subConfig;\r\n                    if (e.target.closest('[data-target=\"subsource-config\"]')) {\r\n                        subConfig = e.target.closest('[data-target=\"subsource-config\"]');\r\n                        if (subConfig.parentNode !== null) {\r\n                            var dataSource = subConfig.parentNode.querySelector('[name=\"config_data_source_idnumber\"]');\r\n                            dataSource.click(); // = true;\r\n                        }\r\n                    }\r\n                }.bind(this));\r\n\r\n                this.getRoot().find('.dash-configuration-form [name=\"config_data_source_idnumber\"]').on('change', function () {\r\n\r\n                    var dataSource = this.getRoot().find('.dash-configuration-form');\r\n                    var formData = $(dataSource).find('form').serialize();\r\n\r\n                    // Now we can continue...\r\n                    Ajax.call([{\r\n                        methodname: 'block_dash_submit_preferences_form',\r\n                        args: {\r\n                            contextid: this.blockContextid,\r\n                            jsonformdata: JSON.stringify(formData)\r\n                        },\r\n                        done: function () {\r\n                            // Hide the preference link for others.\r\n                            this.getRoot().find('.dash-edit-preferences').show();\r\n                            this.refresh();\r\n                        }.bind(this),\r\n                    }])[0].fail(Notification.exception);\r\n                }.bind(this));\r\n\r\n            }\r\n\r\n            this.initDatePickers();\r\n            this.initSelect2();\r\n\r\n            if (this.editing) {\r\n                this.blockPreferencesModal = new PreferencesModal(this.getRoot().find('.dash-edit-preferences'),\r\n                    this.blockContextid, function () {\r\n                        // Preferences changed, go back to first page.\r\n                        this.currentPage = 0;\r\n                        this.refresh();\r\n                    }.bind(this));\r\n            }\r\n            this.getRoot().on('change', 'select:not(.norefresh), input:not(.select2-search__field, .norefresh)',\r\n                function (e) {\r\n                    e.preventDefault();\r\n\r\n                    Log.debug('Submitting filter form');\r\n                    Log.debug(e);\r\n                    Log.debug($(e.target).serializeArray());\r\n\r\n                    // Filter results, go back to first page.\r\n                    this.currentPage = 0;\r\n                    this.refresh();\r\n                }.bind(this));\r\n\r\n            this.getRoot().on('submit', '.downloadreport .reportoption form', function (e) {\r\n                e.preventDefault();\r\n                let params = new URLSearchParams($(e.target).serialize());\r\n                let sortDirection = null;\r\n                if (this.sortField && this.sortDirections.hasOwnProperty(this.sortField)) {\r\n                    sortDirection = this.sortDirections[this.sortField];\r\n                }\r\n                var args = {\r\n                    'download': params.get('download'),\r\n                    \"block_instance_id\": this.blockInstanceId,\r\n                    \"filter_form_data\": JSON.stringify(this.getFilterForm().serializeArray()),\r\n                    \"page\": this.currentPage,\r\n                    \"sort_field\": this.sortField,\r\n                    \"sort_direction\": sortDirection,\r\n                };\r\n                let url = M.cfg.wwwroot + '/blocks/dash/download.php';\r\n                // Create a new form element.\r\n                const form = $('<form>', {\r\n                    method: 'post',\r\n                    action: url,\r\n                    target: '_self',\r\n                });\r\n\r\n                // Add input fields with your data\r\n                form.append($('<input>', { type: 'hidden', name: 'download', value: args.download }));\r\n                form.append($('<input>', { type: 'hidden', name: 'block_instance_id', value: args.block_instance_id }));\r\n                form.append($('<input>', { type: 'hidden', name: 'filter_form_data', value: args.filter_form_data }));\r\n                form.append($('<input>', { type: 'hidden', name: 'page', value: args.page }));\r\n                form.append($('<input>', { type: 'hidden', name: 'sort_field', value: args.sort_field }));\r\n                form.append($('<input>', { type: 'hidden', name: 'sort_direction', value: args.sort_direction }));\r\n\r\n                // Append the form to the body and submit it\r\n                form.appendTo('body').submit();\r\n\r\n            }.bind(this));\r\n\r\n            // Adding support for tab filters.\r\n            this.getRoot().on('click', 'button.tab-filter', function (e) {\r\n                e.preventDefault();\r\n                var elem = $(e.currentTarget);\r\n\r\n                var value = $(e.currentTarget).attr('data-value');\r\n                var select = $(e.currentTarget).parents('.sort-group').find('select');\r\n                var prevVal = select.val();\r\n                // Remove checked is already checked.\r\n                if (elem.hasClass('is-checked')) {\r\n                    elem.removeClass('is-checked');\r\n                    elem.removeClass('btn-primary');\r\n                    if (select.prop('multiple')) {\r\n                        var index = prevVal.indexOf(value.toString());\r\n                        if (index > -1) {\r\n                            prevVal.splice(index, 1);\r\n                            value = prevVal;\r\n                        }\r\n                    }\r\n                } else {\r\n                    elem.addClass('is-checked');\r\n                    elem.addClass('btn-primary');\r\n                    if (select.prop('multiple')) {\r\n                        prevVal.push(value);\r\n                        value = prevVal;\r\n                    }\r\n                }\r\n                // Set value for select.\r\n                select.val(value);\r\n                // Filter results, go back to first page.\r\n                this.currentPage = 0;\r\n                this.refresh();\r\n            }.bind(this));\r\n\r\n            this.getBlockContentArea().on('click', '.page-link', function (e) {\r\n                e.preventDefault();\r\n                this.currentPage = $(e.target).data('page');\r\n                this.refresh();\r\n            }.bind(this));\r\n\r\n            this.getBlockContentArea().on('click', '.dash-sort', function (e) {\r\n                const $target = $(e.target);\r\n                this.sortField = $target.data('sort');\r\n\r\n                // Set sorting to asc by default.\r\n                if (!this.sortDirections.hasOwnProperty(this.sortField)) {\r\n                    this.sortDirections[this.sortField] = 'asc';\r\n                } else {\r\n                    // Toggle sort direction on field.\r\n                    this.sortDirections[this.sortField] = this.sortDirections[this.sortField] === 'asc' ? 'desc' : 'asc';\r\n                }\r\n                this.refresh();\r\n            }.bind(this));\r\n\r\n            if (this.isTotara) {\r\n                this.setDynamicTable();\r\n            }\r\n\r\n            this.loadAjaxPagination();\r\n        };\r\n\r\n        /**\r\n         * Get the root element of this dash instance.\r\n         *\r\n         * @method getRoot\r\n         * @return {object} jQuery object\r\n         */\r\n        DashInstance.prototype.getRoot = function () {\r\n            return this.root;\r\n        };\r\n\r\n        /**\r\n         * Get the content element of this dash instance.\r\n         *\r\n         * @method getRoot\r\n         * @return {object} jQuery object\r\n         */\r\n        DashInstance.prototype.getBlockContentArea = function () {\r\n            return this.getRoot().find(this.BLOCK_CONTENT_SELECTOR);\r\n        };\r\n\r\n        /**\r\n         * Get filter form element.\r\n         *\r\n         * @returns {object} jQuery object\r\n         */\r\n        DashInstance.prototype.getFilterForm = function () {\r\n            return this.getRoot().find(this.FILTER_FORM_SELECTOR);\r\n        };\r\n\r\n        DashInstance.prototype.getBlockContent = function () {\r\n            let sortDirection = null;\r\n            if (this.sortField && this.sortDirections.hasOwnProperty(this.sortField)) {\r\n                sortDirection = this.sortDirections[this.sortField];\r\n            }\r\n\r\n            var request = {\r\n                methodname: 'block_dash_get_block_content',\r\n                args: {\r\n                    \"block_instance_id\": this.blockInstanceId,\r\n                    \"filter_form_data\": JSON.stringify(this.getFilterForm().serializeArray()),\r\n                    \"page\": this.currentPage,\r\n                    \"sort_field\": this.sortField,\r\n                    \"sort_direction\": sortDirection,\r\n                    \"pagelayout\": this.pageLayout,\r\n                    \"pagecontext\": this.pageContext,\r\n                }\r\n            };\r\n            return Ajax.call([request])[0];\r\n        };\r\n\r\n        DashInstance.prototype.refresh = function () {\r\n\r\n            this.getBlockContentArea().css('opacity', 0.5);\r\n            this.getBlockContent()\r\n                .then(function (response) {\r\n                    this.loadAjaxPagination(); // Load pagination.\r\n                    this.getBlockContentArea().html(response.html);\r\n                    this.getBlockContentArea().css('opacity', 1);\r\n                    this.initDatePickers();\r\n                    this.initSelect2();\r\n                    if (response.scripts) {\r\n                        Templates.runTemplateJS($(response.scripts).html() || response.scripts);\r\n                    }\r\n\r\n                }.bind(this))\r\n                .catch(Notification.exception);\r\n        };\r\n\r\n        DashInstance.prototype.initDatePickers = function () {\r\n            this.getRoot().find('.datepicker').datepicker2({\r\n                autoclose: true,\r\n                format: \"dd/mm/yyyy\"\r\n            });\r\n        };\r\n\r\n        DashInstance.prototype.initSelect2 = function () {\r\n            this.getRoot().find('.select2').each(function (index, element) {\r\n                let placeholder = null;\r\n                if ($(element).find(\"option[value='-1']\")) {\r\n                    placeholder = {\r\n                        id: '-1', // The value of the option.\r\n                        text: $(element).find(\"option[value='-1']\").text()\r\n                    };\r\n                }\r\n                $(element).select2({\r\n                    dropdownParent: this.getRoot(),\r\n                    allowClear: true,\r\n                    theme: 'bootstrap4',\r\n                    placeholder: placeholder\r\n                }).on('select2:unselecting', function () {\r\n                    $(this).data('unselecting', true);\r\n                }).on('select2:opening', function (e) {\r\n                    if ($(this).data('unselecting')) {\r\n                        $(this).removeData('unselecting');\r\n                        e.preventDefault();\r\n                    }\r\n                });\r\n            }.bind(this));\r\n        };\r\n\r\n        DashInstance.prototype.setDynamicTable = function () {\r\n\r\n            $('body').delegate('[data-table-dynamic=\"true\"] thead th a', 'click', function (e) {\r\n                e.preventDefault();\r\n                updateTable($(this));\r\n            });\r\n\r\n            $('body').delegate('.modal-body .paging a', 'click', function (e) {\r\n                e.preventDefault();\r\n                updateTable($(this));\r\n            });\r\n\r\n            var updateTable = function (element) {\r\n\r\n                var table = element.parents('.modal-body').find('table');\r\n\r\n                var href = element.attr('href');\r\n                var params = new URL(href).searchParams;\r\n                var page = params.get('page');\r\n                var sortfield = params.get('tsort');\r\n                if (sortfield == '') {\r\n                    sortfield = table.data('table-sort');\r\n                }\r\n\r\n                var tablehandler = table.data('table-handler');\r\n                var filter = table.data('table-filter');\r\n                var uniqueid = table.data('table-uniqueid');\r\n                var context = table.data('table-context');\r\n\r\n                var data = {\r\n                    handler: tablehandler,\r\n                    filter: filter,\r\n                    uniqueid: uniqueid,\r\n                    sort: sortfield,\r\n                    page: page\r\n                };\r\n\r\n                Fragment.loadFragment('block_dash', 'loadtable', context, data).then((html, js) => {\r\n                    $('.modal-body').html(html);\r\n                    Templates.runTemplateJS(js);\r\n                    return html;\r\n                }).catch(Notification.exception);\r\n            };\r\n        };\r\n\r\n        DashInstance.prototype.loadAjaxPagination = function () {\r\n\r\n\r\n            if (this.getRoot().find('.ajax-pagination').length == 0) {\r\n                return;\r\n            }\r\n\r\n            let sortDirection = null;\r\n            if (this.sortField && this.sortDirections.hasOwnProperty(this.sortField)) {\r\n                sortDirection = this.sortDirections[this.sortField];\r\n            }\r\n\r\n            var request = {\r\n                methodname: 'block_dash_get_block_pagination',\r\n                args: {\r\n                    \"block_instance_id\": this.blockInstanceId,\r\n                    \"filter_form_data\": JSON.stringify(this.getFilterForm().serializeArray()),\r\n                    \"page\": this.currentPage,\r\n                    \"sort_field\": this.sortField,\r\n                    \"sort_direction\": sortDirection,\r\n                    \"pagelayout\": this.pageLayout,\r\n                    \"pagecontext\": this.pageContext,\r\n                }\r\n            };\r\n\r\n            Ajax.call([request])[0].then(function (response) {\r\n                this.getRoot().find('.ajax-pagination').html(response.html);\r\n            }.bind(this)).catch(Notification.exception);\r\n\r\n        };\r\n\r\n        return DashInstance;\r\n    });\r\n"],"names":["define","$","UI","Log","Ajax","Notification","ModalEvents","PreferencesModal","DatePicker","Select2","Fragment","Templates","DashInstance","root","blockInstanceId","blockContextid","editing","istotara","pagelayout","pagecontext","sortDirections","currentPage","blockPreferencesModal","sortField","isTotara","pageLayout","pageContext","init","prototype","BLOCK_CONTENT_SELECTOR","FILTER_FORM_SELECTOR","this","getRoot","find","length","removeClass","addClass","hide","on","e","subConfig","target","closest","parentNode","querySelector","click","bind","dataSource","formData","serialize","call","methodname","args","contextid","jsonformdata","JSON","stringify","done","show","refresh","fail","exception","initDatePickers","initSelect2","preventDefault","debug","serializeArray","params","URLSearchParams","sortDirection","hasOwnProperty","get","getFilterForm","url","M","cfg","wwwroot","form","method","action","append","type","name","value","download","block_instance_id","filter_form_data","page","sort_field","sort_direction","appendTo","submit","elem","currentTarget","attr","select","parents","prevVal","val","hasClass","prop","index","indexOf","toString","splice","push","getBlockContentArea","data","$target","setDynamicTable","loadAjaxPagination","getBlockContent","request","css","then","response","html","scripts","runTemplateJS","catch","datepicker2","autoclose","format","each","element","placeholder","id","text","select2","dropdownParent","allowClear","theme","removeData","delegate","updateTable","table","href","URL","searchParams","sortfield","tablehandler","filter","uniqueid","context","handler","sort","loadFragment","js"],"mappings":"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"}