{"version":3,"file":"datepicker.min.js","sources":["../src/datepicker.js"],"sourcesContent":["/*!\r\n * Datepicker2 for Bootstrap v1.9.0 (https://github.com/uxsolutions/bootstrap-datepicker2)\r\n *\r\n * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)\r\n */\r\n\r\n(function(factory){\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports === 'object') {\r\n        factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n}(function($, undefined){\r\n    function UTCDate(){\r\n        return new Date(Date.UTC.apply(Date, arguments));\r\n    }\r\n    function UTCToday(){\r\n        var today = new Date();\r\n        return UTCDate(today.getFullYear(), today.getMonth(), today.getDate());\r\n    }\r\n    function isUTCEquals(date1, date2) {\r\n        return (\r\n            date1.getUTCFullYear() === date2.getUTCFullYear() &&\r\n            date1.getUTCMonth() === date2.getUTCMonth() &&\r\n            date1.getUTCDate() === date2.getUTCDate()\r\n        );\r\n    }\r\n    function alias(method, deprecationMsg){\r\n        return function(){\r\n            if (deprecationMsg !== undefined) {\r\n                $.fn.datepicker2.deprecated(deprecationMsg);\r\n            }\r\n\r\n            return this[method].apply(this, arguments);\r\n        };\r\n    }\r\n    function isValidDate(d) {\r\n        return d && !isNaN(d.getTime());\r\n    }\r\n\r\n    var DateArray = (function(){\r\n        var extras = {\r\n            get: function(i){\r\n                return this.slice(i)[0];\r\n            },\r\n            contains: function(d){\r\n                // Array.indexOf is not cross-browser;\r\n                // $.inArray doesn't work with Dates\r\n                var val = d && d.valueOf();\r\n                for (var i=0, l=this.length; i < l; i++)\r\n                    // Use date arithmetic to allow dates with different times to match\r\n                    if (0 <= this[i].valueOf() - val && this[i].valueOf() - val < 1000*60*60*24)\r\n                        return i;\r\n                return -1;\r\n            },\r\n            remove: function(i){\r\n                this.splice(i,1);\r\n            },\r\n            replace: function(new_array){\r\n                if (!new_array)\r\n                    return;\r\n                if (!$.isArray(new_array))\r\n                    new_array = [new_array];\r\n                this.clear();\r\n                this.push.apply(this, new_array);\r\n            },\r\n            clear: function(){\r\n                this.length = 0;\r\n            },\r\n            copy: function(){\r\n                var a = new DateArray();\r\n                a.replace(this);\r\n                return a;\r\n            }\r\n        };\r\n\r\n        return function(){\r\n            var a = [];\r\n            a.push.apply(a, arguments);\r\n            $.extend(a, extras);\r\n            return a;\r\n        };\r\n    })();\r\n\r\n\r\n    // Picker object\r\n\r\n    var Datepicker2 = function(element, options){\r\n        $.data(element, 'datepicker2', this);\r\n\r\n        this._events = [];\r\n        this._secondaryEvents = [];\r\n\r\n        this._process_options(options);\r\n\r\n        this.dates = new DateArray();\r\n        this.viewDate = this.o.defaultViewDate;\r\n        this.focusDate = null;\r\n\r\n        this.element = $(element);\r\n        this.isInput = this.element.is('input');\r\n        this.inputField = this.isInput ? this.element : this.element.find('input');\r\n        this.component = this.element.hasClass('date') ? this.element.find('.add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn') : false;\r\n        if (this.component && this.component.length === 0)\r\n            this.component = false;\r\n        this.isInline = !this.component && this.element.is('div');\r\n\r\n        this.picker = $(DPGlobal.template);\r\n\r\n        // Checking templates and inserting\r\n        if (this._check_template(this.o.templates.leftArrow)) {\r\n            this.picker.find('.prev').html(this.o.templates.leftArrow);\r\n        }\r\n\r\n        if (this._check_template(this.o.templates.rightArrow)) {\r\n            this.picker.find('.next').html(this.o.templates.rightArrow);\r\n        }\r\n\r\n        this._buildEvents();\r\n        this._attachEvents();\r\n\r\n        if (this.isInline){\r\n            this.picker.addClass('datepicker2-inline').appendTo(this.element);\r\n        }\r\n        else {\r\n            this.picker.addClass('datepicker2-dropdown dropdown-menu');\r\n        }\r\n\r\n        if (this.o.rtl){\r\n            this.picker.addClass('datepicker2-rtl');\r\n        }\r\n\r\n        if (this.o.calendarWeeks) {\r\n            this.picker.find('.datepicker2-days .datepicker2-switch, thead .datepicker2-title, tfoot .today, tfoot .clear')\r\n                .attr('colspan', function(i, val){\r\n                    return Number(val) + 1;\r\n                });\r\n        }\r\n\r\n        this._process_options({\r\n            startDate: this._o.startDate,\r\n            endDate: this._o.endDate,\r\n            daysOfWeekDisabled: this.o.daysOfWeekDisabled,\r\n            daysOfWeekHighlighted: this.o.daysOfWeekHighlighted,\r\n            datesDisabled: this.o.datesDisabled\r\n        });\r\n\r\n        this._allow_update = false;\r\n        this.setViewMode(this.o.startView);\r\n        this._allow_update = true;\r\n\r\n        this.fillDow();\r\n        this.fillMonths();\r\n\r\n        this.update();\r\n\r\n        if (this.isInline){\r\n            this.show();\r\n        }\r\n    };\r\n\r\n    Datepicker2.prototype = {\r\n        constructor: Datepicker2,\r\n\r\n        _resolveViewName: function(view){\r\n            $.each(DPGlobal.viewModes, function(i, viewMode){\r\n                if (view === i || $.inArray(view, viewMode.names) !== -1){\r\n                    view = i;\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return view;\r\n        },\r\n\r\n        _resolveDaysOfWeek: function(daysOfWeek){\r\n            if (!$.isArray(daysOfWeek))\r\n                daysOfWeek = daysOfWeek.split(/[,\\s]*/);\r\n            return $.map(daysOfWeek, Number);\r\n        },\r\n\r\n        _check_template: function(tmp){\r\n            try {\r\n                // If empty\r\n                if (tmp === undefined || tmp === \"\") {\r\n                    return false;\r\n                }\r\n                // If no html, everything ok\r\n                if ((tmp.match(/[<>]/g) || []).length <= 0) {\r\n                    return true;\r\n                }\r\n                // Checking if html is fine\r\n                var jDom = $(tmp);\r\n                return jDom.length > 0;\r\n            }\r\n            catch (ex) {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        _process_options: function(opts){\r\n            // Store raw options for reference\r\n            this._o = $.extend({}, this._o, opts);\r\n            // Processed options\r\n            var o = this.o = $.extend({}, this._o);\r\n\r\n            // Check if \"de-DE\" style date is available, if not language should\r\n            // fallback to 2 letter code eg \"de\"\r\n            var lang = o.language;\r\n            if (!dates[lang]){\r\n                lang = lang.split('-')[0];\r\n                if (!dates[lang])\r\n                    lang = defaults.language;\r\n            }\r\n            o.language = lang;\r\n\r\n            // Retrieve view index from any aliases\r\n            o.startView = this._resolveViewName(o.startView);\r\n            o.minViewMode = this._resolveViewName(o.minViewMode);\r\n            o.maxViewMode = this._resolveViewName(o.maxViewMode);\r\n\r\n            // Check view is between min and max\r\n            o.startView = Math.max(this.o.minViewMode, Math.min(this.o.maxViewMode, o.startView));\r\n\r\n            // true, false, or Number > 0\r\n            if (o.multidate !== true){\r\n                o.multidate = Number(o.multidate) || false;\r\n                if (o.multidate !== false)\r\n                    o.multidate = Math.max(0, o.multidate);\r\n            }\r\n            o.multidateSeparator = String(o.multidateSeparator);\r\n\r\n            o.weekStart %= 7;\r\n            o.weekEnd = (o.weekStart + 6) % 7;\r\n\r\n            var format = DPGlobal.parseFormat(o.format);\r\n            if (o.startDate !== -Infinity){\r\n                if (!!o.startDate){\r\n                    if (o.startDate instanceof Date)\r\n                        o.startDate = this._local_to_utc(this._zero_time(o.startDate));\r\n                    else\r\n                        o.startDate = DPGlobal.parseDate(o.startDate, format, o.language, o.assumeNearbyYear);\r\n                }\r\n                else {\r\n                    o.startDate = -Infinity;\r\n                }\r\n            }\r\n            if (o.endDate !== Infinity){\r\n                if (!!o.endDate){\r\n                    if (o.endDate instanceof Date)\r\n                        o.endDate = this._local_to_utc(this._zero_time(o.endDate));\r\n                    else\r\n                        o.endDate = DPGlobal.parseDate(o.endDate, format, o.language, o.assumeNearbyYear);\r\n                }\r\n                else {\r\n                    o.endDate = Infinity;\r\n                }\r\n            }\r\n\r\n            o.daysOfWeekDisabled = this._resolveDaysOfWeek(o.daysOfWeekDisabled||[]);\r\n            o.daysOfWeekHighlighted = this._resolveDaysOfWeek(o.daysOfWeekHighlighted||[]);\r\n\r\n            o.datesDisabled = o.datesDisabled||[];\r\n            if (!$.isArray(o.datesDisabled)) {\r\n                o.datesDisabled = o.datesDisabled.split(',');\r\n            }\r\n            o.datesDisabled = $.map(o.datesDisabled, function(d){\r\n                return DPGlobal.parseDate(d, format, o.language, o.assumeNearbyYear);\r\n            });\r\n\r\n            var plc = String(o.orientation).toLowerCase().split(/\\s+/g),\r\n                _plc = o.orientation.toLowerCase();\r\n            plc = $.grep(plc, function(word){\r\n                return /^auto|left|right|top|bottom$/.test(word);\r\n            });\r\n            o.orientation = {x: 'auto', y: 'auto'};\r\n            if (!_plc || _plc === 'auto')\r\n                ; // no action\r\n            else if (plc.length === 1){\r\n                switch (plc[0]){\r\n                    case 'top':\r\n                    case 'bottom':\r\n                        o.orientation.y = plc[0];\r\n                        break;\r\n                    case 'left':\r\n                    case 'right':\r\n                        o.orientation.x = plc[0];\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                _plc = $.grep(plc, function(word){\r\n                    return /^left|right$/.test(word);\r\n                });\r\n                o.orientation.x = _plc[0] || 'auto';\r\n\r\n                _plc = $.grep(plc, function(word){\r\n                    return /^top|bottom$/.test(word);\r\n                });\r\n                o.orientation.y = _plc[0] || 'auto';\r\n            }\r\n            if (o.defaultViewDate instanceof Date || typeof o.defaultViewDate === 'string') {\r\n                o.defaultViewDate = DPGlobal.parseDate(o.defaultViewDate, format, o.language, o.assumeNearbyYear);\r\n            } else if (o.defaultViewDate) {\r\n                var year = o.defaultViewDate.year || new Date().getFullYear();\r\n                var month = o.defaultViewDate.month || 0;\r\n                var day = o.defaultViewDate.day || 1;\r\n                o.defaultViewDate = UTCDate(year, month, day);\r\n            } else {\r\n                o.defaultViewDate = UTCToday();\r\n            }\r\n        },\r\n        _applyEvents: function(evs){\r\n            for (var i=0, el, ch, ev; i < evs.length; i++){\r\n                el = evs[i][0];\r\n                if (evs[i].length === 2){\r\n                    ch = undefined;\r\n                    ev = evs[i][1];\r\n                } else if (evs[i].length === 3){\r\n                    ch = evs[i][1];\r\n                    ev = evs[i][2];\r\n                }\r\n                el.on(ev, ch);\r\n            }\r\n        },\r\n        _unapplyEvents: function(evs){\r\n            for (var i=0, el, ev, ch; i < evs.length; i++){\r\n                el = evs[i][0];\r\n                if (evs[i].length === 2){\r\n                    ch = undefined;\r\n                    ev = evs[i][1];\r\n                } else if (evs[i].length === 3){\r\n                    ch = evs[i][1];\r\n                    ev = evs[i][2];\r\n                }\r\n                el.off(ev, ch);\r\n            }\r\n        },\r\n        _buildEvents: function(){\r\n            var events = {\r\n                keyup: $.proxy(function(e){\r\n                    if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)\r\n                        this.update();\r\n                }, this),\r\n                keydown: $.proxy(this.keydown, this),\r\n                paste: $.proxy(this.paste, this)\r\n            };\r\n\r\n            if (this.o.showOnFocus === true) {\r\n                events.focus = $.proxy(this.show, this);\r\n            }\r\n\r\n            if (this.isInput) { // single input\r\n                this._events = [\r\n                    [this.element, events]\r\n                ];\r\n            }\r\n            // component: input + button\r\n            else if (this.component && this.inputField.length) {\r\n                this._events = [\r\n                    // For components that are not readonly, allow keyboard nav\r\n                    [this.inputField, events],\r\n                    [this.component, {\r\n                        click: $.proxy(this.show, this)\r\n                    }]\r\n                ];\r\n            }\r\n            else {\r\n                this._events = [\r\n                    [this.element, {\r\n                        click: $.proxy(this.show, this),\r\n                        keydown: $.proxy(this.keydown, this)\r\n                    }]\r\n                ];\r\n            }\r\n            this._events.push(\r\n                // Component: listen for blur on element descendants\r\n                [this.element, '*', {\r\n                    blur: $.proxy(function(e){\r\n                        this._focused_from = e.target;\r\n                    }, this)\r\n                }],\r\n                // Input: listen for blur on element\r\n                [this.element, {\r\n                    blur: $.proxy(function(e){\r\n                        this._focused_from = e.target;\r\n                    }, this)\r\n                }]\r\n            );\r\n\r\n            if (this.o.immediateUpdates) {\r\n                // Trigger input updates immediately on changed year/month\r\n                this._events.push([this.element, {\r\n                    'changeYear changeMonth': $.proxy(function(e){\r\n                        this.update(e.date);\r\n                    }, this)\r\n                }]);\r\n            }\r\n\r\n            this._secondaryEvents = [\r\n                [this.picker, {\r\n                    click: $.proxy(this.click, this)\r\n                }],\r\n                [this.picker, '.prev, .next', {\r\n                    click: $.proxy(this.navArrowsClick, this)\r\n                }],\r\n                [this.picker, '.day:not(.disabled)', {\r\n                    click: $.proxy(this.dayCellClick, this)\r\n                }],\r\n                [$(window), {\r\n                    resize: $.proxy(this.place, this)\r\n                }],\r\n                [$(document), {\r\n                    'mousedown touchstart': $.proxy(function(e){\r\n                        // Clicked outside the datepicker2, hide it\r\n                        if (!(\r\n                            this.element.is(e.target) ||\r\n                            this.element.find(e.target).length ||\r\n                            this.picker.is(e.target) ||\r\n                            this.picker.find(e.target).length ||\r\n                            this.isInline\r\n                        )){\r\n                            this.hide();\r\n                        }\r\n                    }, this)\r\n                }]\r\n            ];\r\n        },\r\n        _attachEvents: function(){\r\n            this._detachEvents();\r\n            this._applyEvents(this._events);\r\n        },\r\n        _detachEvents: function(){\r\n            this._unapplyEvents(this._events);\r\n        },\r\n        _attachSecondaryEvents: function(){\r\n            this._detachSecondaryEvents();\r\n            this._applyEvents(this._secondaryEvents);\r\n        },\r\n        _detachSecondaryEvents: function(){\r\n            this._unapplyEvents(this._secondaryEvents);\r\n        },\r\n        _trigger: function(event, altdate){\r\n            var date = altdate || this.dates.get(-1),\r\n                local_date = this._utc_to_local(date);\r\n\r\n            this.element.trigger({\r\n                type: event,\r\n                date: local_date,\r\n                viewMode: this.viewMode,\r\n                dates: $.map(this.dates, this._utc_to_local),\r\n                format: $.proxy(function(ix, format){\r\n                    if (arguments.length === 0){\r\n                        ix = this.dates.length - 1;\r\n                        format = this.o.format;\r\n                    } else if (typeof ix === 'string'){\r\n                        format = ix;\r\n                        ix = this.dates.length - 1;\r\n                    }\r\n                    format = format || this.o.format;\r\n                    var date = this.dates.get(ix);\r\n                    return DPGlobal.formatDate(date, format, this.o.language);\r\n                }, this)\r\n            });\r\n        },\r\n\r\n        show: function(){\r\n            if (this.inputField.is(':disabled') || (this.inputField.prop('readonly') && this.o.enableOnReadonly === false))\r\n                return;\r\n            if (!this.isInline)\r\n                this.picker.appendTo(this.o.container);\r\n            this.place();\r\n            this.picker.show();\r\n            this._attachSecondaryEvents();\r\n            this._trigger('show');\r\n            if ((window.navigator.msMaxTouchPoints || 'ontouchstart' in document) && this.o.disableTouchKeyboard) {\r\n                $(this.element).blur();\r\n            }\r\n            return this;\r\n        },\r\n\r\n        hide: function(){\r\n            if (this.isInline || !this.picker.is(':visible'))\r\n                return this;\r\n            this.focusDate = null;\r\n            this.picker.hide().detach();\r\n            this._detachSecondaryEvents();\r\n            this.setViewMode(this.o.startView);\r\n\r\n            if (this.o.forceParse && this.inputField.val())\r\n                this.setValue();\r\n            this._trigger('hide');\r\n            return this;\r\n        },\r\n\r\n        destroy: function(){\r\n            this.hide();\r\n            this._detachEvents();\r\n            this._detachSecondaryEvents();\r\n            this.picker.remove();\r\n            delete this.element.data().datepicker2;\r\n            if (!this.isInput){\r\n                delete this.element.data().date;\r\n            }\r\n            return this;\r\n        },\r\n\r\n        paste: function(e){\r\n            var dateString;\r\n            if (e.originalEvent.clipboardData && e.originalEvent.clipboardData.types\r\n                && $.inArray('text/plain', e.originalEvent.clipboardData.types) !== -1) {\r\n                dateString = e.originalEvent.clipboardData.getData('text/plain');\r\n            } else if (window.clipboardData) {\r\n                dateString = window.clipboardData.getData('Text');\r\n            } else {\r\n                return;\r\n            }\r\n            this.setDate(dateString);\r\n            this.update();\r\n            e.preventDefault();\r\n        },\r\n\r\n        _utc_to_local: function(utc){\r\n            if (!utc) {\r\n                return utc;\r\n            }\r\n\r\n            var local = new Date(utc.getTime() + (utc.getTimezoneOffset() * 60000));\r\n\r\n            if (local.getTimezoneOffset() !== utc.getTimezoneOffset()) {\r\n                local = new Date(utc.getTime() + (local.getTimezoneOffset() * 60000));\r\n            }\r\n\r\n            return local;\r\n        },\r\n        _local_to_utc: function(local){\r\n            return local && new Date(local.getTime() - (local.getTimezoneOffset()*60000));\r\n        },\r\n        _zero_time: function(local){\r\n            return local && new Date(local.getFullYear(), local.getMonth(), local.getDate());\r\n        },\r\n        _zero_utc_time: function(utc){\r\n            return utc && UTCDate(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate());\r\n        },\r\n\r\n        getDates: function(){\r\n            return $.map(this.dates, this._utc_to_local);\r\n        },\r\n\r\n        getUTCDates: function(){\r\n            return $.map(this.dates, function(d){\r\n                return new Date(d);\r\n            });\r\n        },\r\n\r\n        getDate: function(){\r\n            return this._utc_to_local(this.getUTCDate());\r\n        },\r\n\r\n        getUTCDate: function(){\r\n            var selected_date = this.dates.get(-1);\r\n            if (selected_date !== undefined) {\r\n                return new Date(selected_date);\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        clearDates: function(){\r\n            this.inputField.val('');\r\n            this.update();\r\n            this._trigger('changeDate');\r\n\r\n            if (this.o.autoclose) {\r\n                this.hide();\r\n            }\r\n        },\r\n\r\n        setDates: function(){\r\n            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;\r\n            this.update.apply(this, args);\r\n            this._trigger('changeDate');\r\n            this.setValue();\r\n            return this;\r\n        },\r\n\r\n        setUTCDates: function(){\r\n            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;\r\n            this.setDates.apply(this, $.map(args, this._utc_to_local));\r\n            return this;\r\n        },\r\n\r\n        setDate: alias('setDates'),\r\n        setUTCDate: alias('setUTCDates'),\r\n        remove: alias('destroy', 'Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead'),\r\n\r\n        setValue: function(){\r\n            var formatted = this.getFormattedDate();\r\n            this.inputField.val(formatted);\r\n            return this;\r\n        },\r\n\r\n        getFormattedDate: function(format){\r\n            if (format === undefined)\r\n                format = this.o.format;\r\n\r\n            var lang = this.o.language;\r\n            return $.map(this.dates, function(d){\r\n                return DPGlobal.formatDate(d, format, lang);\r\n            }).join(this.o.multidateSeparator);\r\n        },\r\n\r\n        getStartDate: function(){\r\n            return this.o.startDate;\r\n        },\r\n\r\n        setStartDate: function(startDate){\r\n            this._process_options({startDate: startDate});\r\n            this.update();\r\n            this.updateNavArrows();\r\n            return this;\r\n        },\r\n\r\n        getEndDate: function(){\r\n            return this.o.endDate;\r\n        },\r\n\r\n        setEndDate: function(endDate){\r\n            this._process_options({endDate: endDate});\r\n            this.update();\r\n            this.updateNavArrows();\r\n            return this;\r\n        },\r\n\r\n        setDaysOfWeekDisabled: function(daysOfWeekDisabled){\r\n            this._process_options({daysOfWeekDisabled: daysOfWeekDisabled});\r\n            this.update();\r\n            return this;\r\n        },\r\n\r\n        setDaysOfWeekHighlighted: function(daysOfWeekHighlighted){\r\n            this._process_options({daysOfWeekHighlighted: daysOfWeekHighlighted});\r\n            this.update();\r\n            return this;\r\n        },\r\n\r\n        setDatesDisabled: function(datesDisabled){\r\n            this._process_options({datesDisabled: datesDisabled});\r\n            this.update();\r\n            return this;\r\n        },\r\n\r\n        place: function(){\r\n            if (this.isInline)\r\n                return this;\r\n            var calendarWidth = this.picker.outerWidth(),\r\n                calendarHeight = this.picker.outerHeight(),\r\n                visualPadding = 10,\r\n                container = $(this.o.container),\r\n                windowWidth = container.width(),\r\n                scrollTop = this.o.container === 'body' ? $(document).scrollTop() : container.scrollTop(),\r\n                appendOffset = container.offset();\r\n\r\n            var parentsZindex = [0];\r\n            this.element.parents().each(function(){\r\n                var itemZIndex = $(this).css('z-index');\r\n                if (itemZIndex !== 'auto' && Number(itemZIndex) !== 0) parentsZindex.push(Number(itemZIndex));\r\n            });\r\n            var zIndex = Math.max.apply(Math, parentsZindex) + this.o.zIndexOffset;\r\n            var offset = this.component ? this.component.parent().offset() : this.element.offset();\r\n            var height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(false);\r\n            var width = this.component ? this.component.outerWidth(true) : this.element.outerWidth(false);\r\n            var left = offset.left - appendOffset.left;\r\n            var top = offset.top - appendOffset.top;\r\n\r\n            if (this.o.container !== 'body') {\r\n                top += scrollTop;\r\n            }\r\n\r\n            this.picker.removeClass(\r\n                'datepicker2-orient-top datepicker2-orient-bottom '+\r\n                'datepicker2-orient-right datepicker2-orient-left'\r\n            );\r\n\r\n            if (this.o.orientation.x !== 'auto'){\r\n                this.picker.addClass('datepicker2-orient-' + this.o.orientation.x);\r\n                if (this.o.orientation.x === 'right')\r\n                    left -= calendarWidth - width;\r\n            }\r\n            // auto x orientation is best-placement: if it crosses a window\r\n            // edge, fudge it sideways\r\n            else {\r\n                if (offset.left < 0) {\r\n                    // component is outside the window on the left side. Move it into visible range\r\n                    this.picker.addClass('datepicker2-orient-left');\r\n                    left -= offset.left - visualPadding;\r\n                } else if (left + calendarWidth > windowWidth) {\r\n                    // the calendar passes the widow right edge. Align it to component right side\r\n                    this.picker.addClass('datepicker2-orient-right');\r\n                    left += width - calendarWidth;\r\n                } else {\r\n                    if (this.o.rtl) {\r\n                        // Default to right\r\n                        this.picker.addClass('datepicker2-orient-right');\r\n                    } else {\r\n                        // Default to left\r\n                        this.picker.addClass('datepicker2-orient-left');\r\n                    }\r\n                }\r\n            }\r\n\r\n            // auto y orientation is best-situation: top or bottom, no fudging,\r\n            // decision based on which shows more of the calendar\r\n            var yorient = this.o.orientation.y,\r\n                top_overflow;\r\n            if (yorient === 'auto'){\r\n                top_overflow = -scrollTop + top - calendarHeight;\r\n                yorient = top_overflow < 0 ? 'bottom' : 'top';\r\n            }\r\n\r\n            this.picker.addClass('datepicker2-orient-' + yorient);\r\n            if (yorient === 'top')\r\n                top -= calendarHeight + parseInt(this.picker.css('padding-top'));\r\n            else\r\n                top += height;\r\n\r\n            if (this.o.rtl) {\r\n                var right = windowWidth - (left + width);\r\n                this.picker.css({\r\n                    top: top,\r\n                    right: right,\r\n                    zIndex: zIndex\r\n                });\r\n            } else {\r\n                this.picker.css({\r\n                    top: top,\r\n                    left: left,\r\n                    zIndex: zIndex\r\n                });\r\n            }\r\n            return this;\r\n        },\r\n\r\n        _allow_update: true,\r\n        update: function(){\r\n            if (!this._allow_update)\r\n                return this;\r\n\r\n            var oldDates = this.dates.copy(),\r\n                dates = [],\r\n                fromArgs = false;\r\n            if (arguments.length){\r\n                $.each(arguments, $.proxy(function(i, date){\r\n                    if (date instanceof Date)\r\n                        date = this._local_to_utc(date);\r\n                    dates.push(date);\r\n                }, this));\r\n                fromArgs = true;\r\n            } else {\r\n                dates = this.isInput\r\n                    ? this.element.val()\r\n                    : this.element.data('date') || this.inputField.val();\r\n                if (dates && this.o.multidate)\r\n                    dates = dates.split(this.o.multidateSeparator);\r\n                else\r\n                    dates = [dates];\r\n                delete this.element.data().date;\r\n            }\r\n\r\n            dates = $.map(dates, $.proxy(function(date){\r\n                return DPGlobal.parseDate(date, this.o.format, this.o.language, this.o.assumeNearbyYear);\r\n            }, this));\r\n            dates = $.grep(dates, $.proxy(function(date){\r\n                return (\r\n                    !this.dateWithinRange(date) ||\r\n                    !date\r\n                );\r\n            }, this), true);\r\n            this.dates.replace(dates);\r\n\r\n            if (this.o.updateViewDate) {\r\n                if (this.dates.length)\r\n                    this.viewDate = new Date(this.dates.get(-1));\r\n                else if (this.viewDate < this.o.startDate)\r\n                    this.viewDate = new Date(this.o.startDate);\r\n                else if (this.viewDate > this.o.endDate)\r\n                    this.viewDate = new Date(this.o.endDate);\r\n                else\r\n                    this.viewDate = this.o.defaultViewDate;\r\n            }\r\n\r\n            if (fromArgs){\r\n                // setting date by clicking\r\n                this.setValue();\r\n                this.element.change();\r\n            }\r\n            else if (this.dates.length){\r\n                // setting date by typing\r\n                if (String(oldDates) !== String(this.dates) && fromArgs) {\r\n                    this._trigger('changeDate');\r\n                    this.element.change();\r\n                }\r\n            }\r\n            if (!this.dates.length && oldDates.length) {\r\n                this._trigger('clearDate');\r\n                this.element.change();\r\n            }\r\n\r\n            this.fill();\r\n            return this;\r\n        },\r\n\r\n        fillDow: function(){\r\n            if (this.o.showWeekDays) {\r\n                var dowCnt = this.o.weekStart,\r\n                    html = '<tr>';\r\n                if (this.o.calendarWeeks){\r\n                    html += '<th class=\"cw\">&#160;</th>';\r\n                }\r\n                while (dowCnt < this.o.weekStart + 7){\r\n                    html += '<th class=\"dow';\r\n                    if ($.inArray(dowCnt, this.o.daysOfWeekDisabled) !== -1)\r\n                        html += ' disabled';\r\n                    html += '\">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';\r\n                }\r\n                html += '</tr>';\r\n                this.picker.find('.datepicker2-days thead').append(html);\r\n            }\r\n        },\r\n\r\n        fillMonths: function(){\r\n            var localDate = this._utc_to_local(this.viewDate);\r\n            var html = '';\r\n            var focused;\r\n            for (var i = 0; i < 12; i++){\r\n                focused = localDate && localDate.getMonth() === i ? ' focused' : '';\r\n                html += '<span class=\"month' + focused + '\">' + dates[this.o.language].monthsShort[i] + '</span>';\r\n            }\r\n            this.picker.find('.datepicker2-months td').html(html);\r\n        },\r\n\r\n        setRange: function(range){\r\n            if (!range || !range.length)\r\n                delete this.range;\r\n            else\r\n                this.range = $.map(range, function(d){\r\n                    return d.valueOf();\r\n                });\r\n            this.fill();\r\n        },\r\n\r\n        getClassNames: function(date){\r\n            var cls = [],\r\n                year = this.viewDate.getUTCFullYear(),\r\n                month = this.viewDate.getUTCMonth(),\r\n                today = UTCToday();\r\n            if (date.getUTCFullYear() < year || (date.getUTCFullYear() === year && date.getUTCMonth() < month)){\r\n                cls.push('old');\r\n            } else if (date.getUTCFullYear() > year || (date.getUTCFullYear() === year && date.getUTCMonth() > month)){\r\n                cls.push('new');\r\n            }\r\n            if (this.focusDate && date.valueOf() === this.focusDate.valueOf())\r\n                cls.push('focused');\r\n            // Compare internal UTC date with UTC today, not local today\r\n            if (this.o.todayHighlight && isUTCEquals(date, today)) {\r\n                cls.push('today');\r\n            }\r\n            if (this.dates.contains(date) !== -1)\r\n                cls.push('active');\r\n            if (!this.dateWithinRange(date)){\r\n                cls.push('disabled');\r\n            }\r\n            if (this.dateIsDisabled(date)){\r\n                cls.push('disabled', 'disabled-date');\r\n            }\r\n            if ($.inArray(date.getUTCDay(), this.o.daysOfWeekHighlighted) !== -1){\r\n                cls.push('highlighted');\r\n            }\r\n\r\n            if (this.range){\r\n                if (date > this.range[0] && date < this.range[this.range.length-1]){\r\n                    cls.push('range');\r\n                }\r\n                if ($.inArray(date.valueOf(), this.range) !== -1){\r\n                    cls.push('selected');\r\n                }\r\n                if (date.valueOf() === this.range[0]){\r\n                    cls.push('range-start');\r\n                }\r\n                if (date.valueOf() === this.range[this.range.length-1]){\r\n                    cls.push('range-end');\r\n                }\r\n            }\r\n            return cls;\r\n        },\r\n\r\n        _fill_yearsView: function(selector, cssClass, factor, year, startYear, endYear, beforeFn){\r\n            var html = '';\r\n            var step = factor / 10;\r\n            var view = this.picker.find(selector);\r\n            var startVal = Math.floor(year / factor) * factor;\r\n            var endVal = startVal + step * 9;\r\n            var focusedVal = Math.floor(this.viewDate.getFullYear() / step) * step;\r\n            var selected = $.map(this.dates, function(d){\r\n                return Math.floor(d.getUTCFullYear() / step) * step;\r\n            });\r\n\r\n            var classes, tooltip, before;\r\n            for (var currVal = startVal - step; currVal <= endVal + step; currVal += step) {\r\n                classes = [cssClass];\r\n                tooltip = null;\r\n\r\n                if (currVal === startVal - step) {\r\n                    classes.push('old');\r\n                } else if (currVal === endVal + step) {\r\n                    classes.push('new');\r\n                }\r\n                if ($.inArray(currVal, selected) !== -1) {\r\n                    classes.push('active');\r\n                }\r\n                if (currVal < startYear || currVal > endYear) {\r\n                    classes.push('disabled');\r\n                }\r\n                if (currVal === focusedVal) {\r\n                    classes.push('focused');\r\n                }\r\n\r\n                if (beforeFn !== $.noop) {\r\n                    before = beforeFn(new Date(currVal, 0, 1));\r\n                    if (before === undefined) {\r\n                        before = {};\r\n                    } else if (typeof before === 'boolean') {\r\n                        before = {enabled: before};\r\n                    } else if (typeof before === 'string') {\r\n                        before = {classes: before};\r\n                    }\r\n                    if (before.enabled === false) {\r\n                        classes.push('disabled');\r\n                    }\r\n                    if (before.classes) {\r\n                        classes = classes.concat(before.classes.split(/\\s+/));\r\n                    }\r\n                    if (before.tooltip) {\r\n                        tooltip = before.tooltip;\r\n                    }\r\n                }\r\n\r\n                html += '<span class=\"' + classes.join(' ') + '\"' + (tooltip ? ' title=\"' + tooltip + '\"' : '') + '>' + currVal + '</span>';\r\n            }\r\n\r\n            view.find('.datepicker2-switch').text(startVal + '-' + endVal);\r\n            view.find('td').html(html);\r\n        },\r\n\r\n        fill: function(){\r\n            var d = new Date(this.viewDate),\r\n                year = d.getUTCFullYear(),\r\n                month = d.getUTCMonth(),\r\n                startYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,\r\n                startMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,\r\n                endYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,\r\n                endMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,\r\n                todaytxt = dates[this.o.language].today || dates['en'].today || '',\r\n                cleartxt = dates[this.o.language].clear || dates['en'].clear || '',\r\n                titleFormat = dates[this.o.language].titleFormat || dates['en'].titleFormat,\r\n                todayDate = UTCToday(),\r\n                titleBtnVisible = (this.o.todayBtn === true || this.o.todayBtn === 'linked') && todayDate >= this.o.startDate && todayDate <= this.o.endDate && !this.weekOfDateIsDisabled(todayDate),\r\n                tooltip,\r\n                before;\r\n            if (isNaN(year) || isNaN(month))\r\n                return;\r\n            this.picker.find('.datepicker2-days .datepicker2-switch')\r\n                .text(DPGlobal.formatDate(d, titleFormat, this.o.language));\r\n            this.picker.find('tfoot .today')\r\n                .text(todaytxt)\r\n                .css('display', titleBtnVisible ? 'table-cell' : 'none');\r\n            this.picker.find('tfoot .clear')\r\n                .text(cleartxt)\r\n                .css('display', this.o.clearBtn === true ? 'table-cell' : 'none');\r\n            this.picker.find('thead .datepicker2-title')\r\n                .text(this.o.title)\r\n                .css('display', typeof this.o.title === 'string' && this.o.title !== '' ? 'table-cell' : 'none');\r\n            this.updateNavArrows();\r\n            this.fillMonths();\r\n            var prevMonth = UTCDate(year, month, 0),\r\n                day = prevMonth.getUTCDate();\r\n            prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.o.weekStart + 7)%7);\r\n            var nextMonth = new Date(prevMonth);\r\n            if (prevMonth.getUTCFullYear() < 100){\r\n                nextMonth.setUTCFullYear(prevMonth.getUTCFullYear());\r\n            }\r\n            nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\r\n            nextMonth = nextMonth.valueOf();\r\n            var html = [];\r\n            var weekDay, clsName;\r\n            while (prevMonth.valueOf() < nextMonth){\r\n                weekDay = prevMonth.getUTCDay();\r\n                if (weekDay === this.o.weekStart){\r\n                    html.push('<tr>');\r\n                    if (this.o.calendarWeeks){\r\n                        // ISO 8601: First week contains first thursday.\r\n                        // ISO also states week starts on Monday, but we can be more abstract here.\r\n                        var\r\n                            // Start of current week: based on weekstart/current date\r\n                            ws = new Date(+prevMonth + (this.o.weekStart - weekDay - 7) % 7 * 864e5),\r\n                            // Thursday of this week\r\n                            th = new Date(Number(ws) + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),\r\n                            // First Thursday of year, year from thursday\r\n                            yth = new Date(Number(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay()) % 7 * 864e5),\r\n                            // Calendar week: ms between thursdays, div ms per day, div 7 days\r\n                            calWeek = (th - yth) / 864e5 / 7 + 1;\r\n                        html.push('<td class=\"cw\">'+ calWeek +'</td>');\r\n                    }\r\n                }\r\n                clsName = this.getClassNames(prevMonth);\r\n                clsName.push('day');\r\n\r\n                var content = prevMonth.getUTCDate();\r\n\r\n                if (this.o.beforeShowDay !== $.noop){\r\n                    before = this.o.beforeShowDay(this._utc_to_local(prevMonth));\r\n                    if (before === undefined)\r\n                        before = {};\r\n                    else if (typeof before === 'boolean')\r\n                        before = {enabled: before};\r\n                    else if (typeof before === 'string')\r\n                        before = {classes: before};\r\n                    if (before.enabled === false)\r\n                        clsName.push('disabled');\r\n                    if (before.classes)\r\n                        clsName = clsName.concat(before.classes.split(/\\s+/));\r\n                    if (before.tooltip)\r\n                        tooltip = before.tooltip;\r\n                    if (before.content)\r\n                        content = before.content;\r\n                }\r\n\r\n                //Check if uniqueSort exists (supported by jquery >=1.12 and >=2.2)\r\n                //Fallback to unique function for older jquery versions\r\n                if ($.isFunction($.uniqueSort)) {\r\n                    clsName = $.uniqueSort(clsName);\r\n                } else {\r\n                    clsName = $.unique(clsName);\r\n                }\r\n\r\n                html.push('<td class=\"'+clsName.join(' ')+'\"' + (tooltip ? ' title=\"'+tooltip+'\"' : '') + ' data-date=\"' + prevMonth.getTime().toString() + '\">' + content + '</td>');\r\n                tooltip = null;\r\n                if (weekDay === this.o.weekEnd){\r\n                    html.push('</tr>');\r\n                }\r\n                prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\r\n            }\r\n            this.picker.find('.datepicker2-days tbody').html(html.join(''));\r\n\r\n            var monthsTitle = dates[this.o.language].monthsTitle || dates['en'].monthsTitle || 'Months';\r\n            var months = this.picker.find('.datepicker2-months')\r\n                .find('.datepicker2-switch')\r\n                .text(this.o.maxViewMode < 2 ? monthsTitle : year)\r\n                .end()\r\n                .find('tbody span').removeClass('active');\r\n\r\n            $.each(this.dates, function(i, d){\r\n                if (d.getUTCFullYear() === year)\r\n                    months.eq(d.getUTCMonth()).addClass('active');\r\n            });\r\n\r\n            if (year < startYear || year > endYear){\r\n                months.addClass('disabled');\r\n            }\r\n            if (year === startYear){\r\n                months.slice(0, startMonth).addClass('disabled');\r\n            }\r\n            if (year === endYear){\r\n                months.slice(endMonth+1).addClass('disabled');\r\n            }\r\n\r\n            if (this.o.beforeShowMonth !== $.noop){\r\n                var that = this;\r\n                $.each(months, function(i, month){\r\n                    var moDate = new Date(year, i, 1);\r\n                    var before = that.o.beforeShowMonth(moDate);\r\n                    if (before === undefined)\r\n                        before = {};\r\n                    else if (typeof before === 'boolean')\r\n                        before = {enabled: before};\r\n                    else if (typeof before === 'string')\r\n                        before = {classes: before};\r\n                    if (before.enabled === false && !$(month).hasClass('disabled'))\r\n                        $(month).addClass('disabled');\r\n                    if (before.classes)\r\n                        $(month).addClass(before.classes);\r\n                    if (before.tooltip)\r\n                        $(month).prop('title', before.tooltip);\r\n                });\r\n            }\r\n\r\n            // Generating decade/years picker\r\n            this._fill_yearsView(\r\n                '.datepicker2-years',\r\n                'year',\r\n                10,\r\n                year,\r\n                startYear,\r\n                endYear,\r\n                this.o.beforeShowYear\r\n            );\r\n\r\n            // Generating century/decades picker\r\n            this._fill_yearsView(\r\n                '.datepicker2-decades',\r\n                'decade',\r\n                100,\r\n                year,\r\n                startYear,\r\n                endYear,\r\n                this.o.beforeShowDecade\r\n            );\r\n\r\n            // Generating millennium/centuries picker\r\n            this._fill_yearsView(\r\n                '.datepicker2-centuries',\r\n                'century',\r\n                1000,\r\n                year,\r\n                startYear,\r\n                endYear,\r\n                this.o.beforeShowCentury\r\n            );\r\n        },\r\n\r\n        updateNavArrows: function(){\r\n            if (!this._allow_update)\r\n                return;\r\n\r\n            var d = new Date(this.viewDate),\r\n                year = d.getUTCFullYear(),\r\n                month = d.getUTCMonth(),\r\n                startYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,\r\n                startMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,\r\n                endYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,\r\n                endMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,\r\n                prevIsDisabled,\r\n                nextIsDisabled,\r\n                factor = 1;\r\n            switch (this.viewMode){\r\n                case 4:\r\n                    factor *= 10;\r\n                /* falls through */\r\n                case 3:\r\n                    factor *= 10;\r\n                /* falls through */\r\n                case 2:\r\n                    factor *= 10;\r\n                /* falls through */\r\n                case 1:\r\n                    prevIsDisabled = Math.floor(year / factor) * factor <= startYear;\r\n                    nextIsDisabled = Math.floor(year / factor) * factor + factor > endYear;\r\n                    break;\r\n                case 0:\r\n                    prevIsDisabled = year <= startYear && month <= startMonth;\r\n                    nextIsDisabled = year >= endYear && month >= endMonth;\r\n                    break;\r\n            }\r\n\r\n            this.picker.find('.prev').toggleClass('disabled', prevIsDisabled);\r\n            this.picker.find('.next').toggleClass('disabled', nextIsDisabled);\r\n        },\r\n\r\n        click: function(e){\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            var target, dir, day, year, month;\r\n            target = $(e.target);\r\n\r\n            // Clicked on the switch\r\n            if (target.hasClass('datepicker2-switch') && this.viewMode !== this.o.maxViewMode){\r\n                this.setViewMode(this.viewMode + 1);\r\n            }\r\n\r\n            // Clicked on today button\r\n            if (target.hasClass('today') && !target.hasClass('day')){\r\n                this.setViewMode(0);\r\n                this._setDate(UTCToday(), this.o.todayBtn === 'linked' ? null : 'view');\r\n            }\r\n\r\n            // Clicked on clear button\r\n            if (target.hasClass('clear')){\r\n                this.clearDates();\r\n            }\r\n\r\n            if (!target.hasClass('disabled')){\r\n                // Clicked on a month, year, decade, century\r\n                if (target.hasClass('month')\r\n                    || target.hasClass('year')\r\n                    || target.hasClass('decade')\r\n                    || target.hasClass('century')) {\r\n                    this.viewDate.setUTCDate(1);\r\n\r\n                    day = 1;\r\n                    if (this.viewMode === 1){\r\n                        month = target.parent().find('span').index(target);\r\n                        year = this.viewDate.getUTCFullYear();\r\n                        this.viewDate.setUTCMonth(month);\r\n                    } else {\r\n                        month = 0;\r\n                        year = Number(target.text());\r\n                        this.viewDate.setUTCFullYear(year);\r\n                    }\r\n\r\n                    this._trigger(DPGlobal.viewModes[this.viewMode - 1].e, this.viewDate);\r\n\r\n                    if (this.viewMode === this.o.minViewMode){\r\n                        this._setDate(UTCDate(year, month, day));\r\n                    } else {\r\n                        this.setViewMode(this.viewMode - 1);\r\n                        this.fill();\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.picker.is(':visible') && this._focused_from){\r\n                this._focused_from.focus();\r\n            }\r\n            delete this._focused_from;\r\n        },\r\n\r\n        dayCellClick: function(e){\r\n            var $target = $(e.currentTarget);\r\n            var timestamp = $target.data('date');\r\n            var date = new Date(timestamp);\r\n\r\n            if (this.o.updateViewDate) {\r\n                if (date.getUTCFullYear() !== this.viewDate.getUTCFullYear()) {\r\n                    this._trigger('changeYear', this.viewDate);\r\n                }\r\n\r\n                if (date.getUTCMonth() !== this.viewDate.getUTCMonth()) {\r\n                    this._trigger('changeMonth', this.viewDate);\r\n                }\r\n            }\r\n            this._setDate(date);\r\n        },\r\n\r\n        // Clicked on prev or next\r\n        navArrowsClick: function(e){\r\n            var $target = $(e.currentTarget);\r\n            var dir = $target.hasClass('prev') ? -1 : 1;\r\n            if (this.viewMode !== 0){\r\n                dir *= DPGlobal.viewModes[this.viewMode].navStep * 12;\r\n            }\r\n            this.viewDate = this.moveMonth(this.viewDate, dir);\r\n            this._trigger(DPGlobal.viewModes[this.viewMode].e, this.viewDate);\r\n            this.fill();\r\n        },\r\n\r\n        _toggle_multidate: function(date){\r\n            var ix = this.dates.contains(date);\r\n            if (!date){\r\n                this.dates.clear();\r\n            }\r\n\r\n            if (ix !== -1){\r\n                if (this.o.multidate === true || this.o.multidate > 1 || this.o.toggleActive){\r\n                    this.dates.remove(ix);\r\n                }\r\n            } else if (this.o.multidate === false) {\r\n                this.dates.clear();\r\n                this.dates.push(date);\r\n            }\r\n            else {\r\n                this.dates.push(date);\r\n            }\r\n\r\n            if (typeof this.o.multidate === 'number')\r\n                while (this.dates.length > this.o.multidate)\r\n                    this.dates.remove(0);\r\n        },\r\n\r\n        _setDate: function(date, which){\r\n            if (!which || which === 'date')\r\n                this._toggle_multidate(date && new Date(date));\r\n            if ((!which && this.o.updateViewDate) || which === 'view')\r\n                this.viewDate = date && new Date(date);\r\n\r\n            this.fill();\r\n            this.setValue();\r\n            if (!which || which !== 'view') {\r\n                this._trigger('changeDate');\r\n            }\r\n            this.inputField.trigger('change');\r\n            if (this.o.autoclose && (!which || which === 'date')){\r\n                this.hide();\r\n            }\r\n        },\r\n\r\n        moveDay: function(date, dir){\r\n            var newDate = new Date(date);\r\n            newDate.setUTCDate(date.getUTCDate() + dir);\r\n\r\n            return newDate;\r\n        },\r\n\r\n        moveWeek: function(date, dir){\r\n            return this.moveDay(date, dir * 7);\r\n        },\r\n\r\n        moveMonth: function(date, dir){\r\n            if (!isValidDate(date))\r\n                return this.o.defaultViewDate;\r\n            if (!dir)\r\n                return date;\r\n            var new_date = new Date(date.valueOf()),\r\n                day = new_date.getUTCDate(),\r\n                month = new_date.getUTCMonth(),\r\n                mag = Math.abs(dir),\r\n                new_month, test;\r\n            dir = dir > 0 ? 1 : -1;\r\n            if (mag === 1){\r\n                test = dir === -1\r\n                    // If going back one month, make sure month is not current month\r\n                    // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\r\n                    ? function(){\r\n                        return new_date.getUTCMonth() === month;\r\n                    }\r\n                    // If going forward one month, make sure month is as expected\r\n                    // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\r\n                    : function(){\r\n                        return new_date.getUTCMonth() !== new_month;\r\n                    };\r\n                new_month = month + dir;\r\n                new_date.setUTCMonth(new_month);\r\n                // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\r\n                new_month = (new_month + 12) % 12;\r\n            }\r\n            else {\r\n                // For magnitudes >1, move one month at a time...\r\n                for (var i=0; i < mag; i++)\r\n                    // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\r\n                    new_date = this.moveMonth(new_date, dir);\r\n                // ...then reset the day, keeping it in the new month\r\n                new_month = new_date.getUTCMonth();\r\n                new_date.setUTCDate(day);\r\n                test = function(){\r\n                    return new_month !== new_date.getUTCMonth();\r\n                };\r\n            }\r\n            // Common date-resetting loop -- if date is beyond end of month, make it\r\n            // end of month\r\n            while (test()){\r\n                new_date.setUTCDate(--day);\r\n                new_date.setUTCMonth(new_month);\r\n            }\r\n            return new_date;\r\n        },\r\n\r\n        moveYear: function(date, dir){\r\n            return this.moveMonth(date, dir*12);\r\n        },\r\n\r\n        moveAvailableDate: function(date, dir, fn){\r\n            do {\r\n                date = this[fn](date, dir);\r\n\r\n                if (!this.dateWithinRange(date))\r\n                    return false;\r\n\r\n                fn = 'moveDay';\r\n            }\r\n            while (this.dateIsDisabled(date));\r\n\r\n            return date;\r\n        },\r\n\r\n        weekOfDateIsDisabled: function(date){\r\n            return $.inArray(date.getUTCDay(), this.o.daysOfWeekDisabled) !== -1;\r\n        },\r\n\r\n        dateIsDisabled: function(date){\r\n            return (\r\n                this.weekOfDateIsDisabled(date) ||\r\n                $.grep(this.o.datesDisabled, function(d){\r\n                    return isUTCEquals(date, d);\r\n                }).length > 0\r\n            );\r\n        },\r\n\r\n        dateWithinRange: function(date){\r\n            return date >= this.o.startDate && date <= this.o.endDate;\r\n        },\r\n\r\n        keydown: function(e){\r\n            if (!this.picker.is(':visible')){\r\n                if (e.keyCode === 40 || e.keyCode === 27) { // allow down to re-show picker\r\n                    this.show();\r\n                    e.stopPropagation();\r\n                }\r\n                return;\r\n            }\r\n            var dateChanged = false,\r\n                dir, newViewDate,\r\n                focusDate = this.focusDate || this.viewDate;\r\n            switch (e.keyCode){\r\n                case 27: // escape\r\n                    if (this.focusDate){\r\n                        this.focusDate = null;\r\n                        this.viewDate = this.dates.get(-1) || this.viewDate;\r\n                        this.fill();\r\n                    }\r\n                    else\r\n                        this.hide();\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    break;\r\n                case 37: // left\r\n                case 38: // up\r\n                case 39: // right\r\n                case 40: // down\r\n                    if (!this.o.keyboardNavigation || this.o.daysOfWeekDisabled.length === 7)\r\n                        break;\r\n                    dir = e.keyCode === 37 || e.keyCode === 38 ? -1 : 1;\r\n                    if (this.viewMode === 0) {\r\n                        if (e.ctrlKey){\r\n                            newViewDate = this.moveAvailableDate(focusDate, dir, 'moveYear');\r\n\r\n                            if (newViewDate)\r\n                                this._trigger('changeYear', this.viewDate);\r\n                        } else if (e.shiftKey){\r\n                            newViewDate = this.moveAvailableDate(focusDate, dir, 'moveMonth');\r\n\r\n                            if (newViewDate)\r\n                                this._trigger('changeMonth', this.viewDate);\r\n                        } else if (e.keyCode === 37 || e.keyCode === 39){\r\n                            newViewDate = this.moveAvailableDate(focusDate, dir, 'moveDay');\r\n                        } else if (!this.weekOfDateIsDisabled(focusDate)){\r\n                            newViewDate = this.moveAvailableDate(focusDate, dir, 'moveWeek');\r\n                        }\r\n                    } else if (this.viewMode === 1) {\r\n                        if (e.keyCode === 38 || e.keyCode === 40) {\r\n                            dir = dir * 4;\r\n                        }\r\n                        newViewDate = this.moveAvailableDate(focusDate, dir, 'moveMonth');\r\n                    } else if (this.viewMode === 2) {\r\n                        if (e.keyCode === 38 || e.keyCode === 40) {\r\n                            dir = dir * 4;\r\n                        }\r\n                        newViewDate = this.moveAvailableDate(focusDate, dir, 'moveYear');\r\n                    }\r\n                    if (newViewDate){\r\n                        this.focusDate = this.viewDate = newViewDate;\r\n                        this.setValue();\r\n                        this.fill();\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n                case 13: // enter\r\n                    if (!this.o.forceParse)\r\n                        break;\r\n                    focusDate = this.focusDate || this.dates.get(-1) || this.viewDate;\r\n                    if (this.o.keyboardNavigation) {\r\n                        this._toggle_multidate(focusDate);\r\n                        dateChanged = true;\r\n                    }\r\n                    this.focusDate = null;\r\n                    this.viewDate = this.dates.get(-1) || this.viewDate;\r\n                    this.setValue();\r\n                    this.fill();\r\n                    if (this.picker.is(':visible')){\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                        if (this.o.autoclose)\r\n                            this.hide();\r\n                    }\r\n                    break;\r\n                case 9: // tab\r\n                    this.focusDate = null;\r\n                    this.viewDate = this.dates.get(-1) || this.viewDate;\r\n                    this.fill();\r\n                    this.hide();\r\n                    break;\r\n            }\r\n            if (dateChanged){\r\n                if (this.dates.length)\r\n                    this._trigger('changeDate');\r\n                else\r\n                    this._trigger('clearDate');\r\n                this.inputField.trigger('change');\r\n            }\r\n        },\r\n\r\n        setViewMode: function(viewMode){\r\n            this.viewMode = viewMode;\r\n            this.picker\r\n                .children('div')\r\n                .hide()\r\n                .filter('.datepicker2-' + DPGlobal.viewModes[this.viewMode].clsName)\r\n                .show();\r\n            this.updateNavArrows();\r\n            this._trigger('changeViewMode', new Date(this.viewDate));\r\n        }\r\n    };\r\n\r\n    var DateRangePicker = function(element, options){\r\n        $.data(element, 'datepicker2', this);\r\n        this.element = $(element);\r\n        this.inputs = $.map(options.inputs, function(i){\r\n            return i.jquery ? i[0] : i;\r\n        });\r\n        delete options.inputs;\r\n\r\n        this.keepEmptyValues = options.keepEmptyValues;\r\n        delete options.keepEmptyValues;\r\n\r\n        datepicker2Plugin.call($(this.inputs), options)\r\n            .on('changeDate', $.proxy(this.dateUpdated, this));\r\n\r\n        this.pickers = $.map(this.inputs, function(i){\r\n            return $.data(i, 'datepicker2');\r\n        });\r\n        this.updateDates();\r\n    };\r\n    DateRangePicker.prototype = {\r\n        updateDates: function(){\r\n            this.dates = $.map(this.pickers, function(i){\r\n                return i.getUTCDate();\r\n            });\r\n            this.updateRanges();\r\n        },\r\n        updateRanges: function(){\r\n            var range = $.map(this.dates, function(d){\r\n                return d.valueOf();\r\n            });\r\n            $.each(this.pickers, function(i, p){\r\n                p.setRange(range);\r\n            });\r\n        },\r\n        clearDates: function(){\r\n            $.each(this.pickers, function(i, p){\r\n                p.clearDates();\r\n            });\r\n        },\r\n        dateUpdated: function(e){\r\n            // `this.updating` is a workaround for preventing infinite recursion\r\n            // between `changeDate` triggering and `setUTCDate` calling.  Until\r\n            // there is a better mechanism.\r\n            if (this.updating)\r\n                return;\r\n            this.updating = true;\r\n\r\n            var dp = $.data(e.target, 'datepicker2');\r\n\r\n            if (dp === undefined) {\r\n                return;\r\n            }\r\n\r\n            var new_date = dp.getUTCDate(),\r\n                keep_empty_values = this.keepEmptyValues,\r\n                i = $.inArray(e.target, this.inputs),\r\n                j = i - 1,\r\n                k = i + 1,\r\n                l = this.inputs.length;\r\n            if (i === -1)\r\n                return;\r\n\r\n            $.each(this.pickers, function(i, p){\r\n                if (!p.getUTCDate() && (p === dp || !keep_empty_values))\r\n                    p.setUTCDate(new_date);\r\n            });\r\n\r\n            if (new_date < this.dates[j]){\r\n                // Date being moved earlier/left\r\n                while (j >= 0 && new_date < this.dates[j]){\r\n                    this.pickers[j--].setUTCDate(new_date);\r\n                }\r\n            } else if (new_date > this.dates[k]){\r\n                // Date being moved later/right\r\n                while (k < l && new_date > this.dates[k]){\r\n                    this.pickers[k++].setUTCDate(new_date);\r\n                }\r\n            }\r\n            this.updateDates();\r\n\r\n            delete this.updating;\r\n        },\r\n        destroy: function(){\r\n            $.map(this.pickers, function(p){ p.destroy(); });\r\n            $(this.inputs).off('changeDate', this.dateUpdated);\r\n            delete this.element.data().datepicker2;\r\n        },\r\n        remove: alias('destroy', 'Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead')\r\n    };\r\n\r\n    function opts_from_el(el, prefix){\r\n        // Derive options from element data-attrs\r\n        var data = $(el).data(),\r\n            out = {}, inkey,\r\n            replace = new RegExp('^' + prefix.toLowerCase() + '([A-Z])');\r\n        prefix = new RegExp('^' + prefix.toLowerCase());\r\n        function re_lower(_,a){\r\n            return a.toLowerCase();\r\n        }\r\n        for (var key in data)\r\n            if (prefix.test(key)){\r\n                inkey = key.replace(replace, re_lower);\r\n                out[inkey] = data[key];\r\n            }\r\n        return out;\r\n    }\r\n\r\n    function opts_from_locale(lang){\r\n        // Derive options from locale plugins\r\n        var out = {};\r\n        // Check if \"de-DE\" style date is available, if not language should\r\n        // fallback to 2 letter code eg \"de\"\r\n        if (!dates[lang]){\r\n            lang = lang.split('-')[0];\r\n            if (!dates[lang])\r\n                return;\r\n        }\r\n        var d = dates[lang];\r\n        $.each(locale_opts, function(i,k){\r\n            if (k in d)\r\n                out[k] = d[k];\r\n        });\r\n        return out;\r\n    }\r\n\r\n    var old = $.fn.datepicker2;\r\n    var datepicker2Plugin = function(option){\r\n        var args = Array.apply(null, arguments);\r\n        args.shift();\r\n        var internal_return;\r\n        this.each(function(){\r\n            var $this = $(this),\r\n                data = $this.data('datepicker2'),\r\n                options = typeof option === 'object' && option;\r\n            if (!data){\r\n                var elopts = opts_from_el(this, 'date'),\r\n                    // Preliminary otions\r\n                    xopts = $.extend({}, defaults, elopts, options),\r\n                    locopts = opts_from_locale(xopts.language),\r\n                    // Options priority: js args, data-attrs, locales, defaults\r\n                    opts = $.extend({}, defaults, locopts, elopts, options);\r\n                if ($this.hasClass('input-daterange') || opts.inputs){\r\n                    $.extend(opts, {\r\n                        inputs: opts.inputs || $this.find('input').toArray()\r\n                    });\r\n                    data = new DateRangePicker(this, opts);\r\n                }\r\n                else {\r\n                    data = new Datepicker2(this, opts);\r\n                }\r\n                $this.data('datepicker2', data);\r\n            }\r\n            if (typeof option === 'string' && typeof data[option] === 'function'){\r\n                internal_return = data[option].apply(data, args);\r\n            }\r\n        });\r\n\r\n        if (\r\n            internal_return === undefined ||\r\n            internal_return instanceof Datepicker2 ||\r\n            internal_return instanceof DateRangePicker\r\n        )\r\n            return this;\r\n\r\n        if (this.length > 1)\r\n            throw new Error('Using only allowed for the collection of a single element (' + option + ' function)');\r\n        else\r\n            return internal_return;\r\n    };\r\n    $.fn.datepicker2 = datepicker2Plugin;\r\n\r\n    var defaults = $.fn.datepicker2.defaults = {\r\n        assumeNearbyYear: false,\r\n        autoclose: false,\r\n        beforeShowDay: $.noop,\r\n        beforeShowMonth: $.noop,\r\n        beforeShowYear: $.noop,\r\n        beforeShowDecade: $.noop,\r\n        beforeShowCentury: $.noop,\r\n        calendarWeeks: false,\r\n        clearBtn: false,\r\n        toggleActive: false,\r\n        daysOfWeekDisabled: [],\r\n        daysOfWeekHighlighted: [],\r\n        datesDisabled: [],\r\n        endDate: Infinity,\r\n        forceParse: true,\r\n        format: 'mm/dd/yyyy',\r\n        keepEmptyValues: false,\r\n        keyboardNavigation: true,\r\n        language: 'en',\r\n        minViewMode: 0,\r\n        maxViewMode: 4,\r\n        multidate: false,\r\n        multidateSeparator: ',',\r\n        orientation: \"auto\",\r\n        rtl: false,\r\n        startDate: -Infinity,\r\n        startView: 0,\r\n        todayBtn: false,\r\n        todayHighlight: false,\r\n        updateViewDate: true,\r\n        weekStart: 0,\r\n        disableTouchKeyboard: false,\r\n        enableOnReadonly: true,\r\n        showOnFocus: true,\r\n        zIndexOffset: 10,\r\n        container: 'body',\r\n        immediateUpdates: false,\r\n        title: '',\r\n        templates: {\r\n            leftArrow: '&#x00AB;',\r\n            rightArrow: '&#x00BB;'\r\n        },\r\n        showWeekDays: true\r\n    };\r\n    var locale_opts = $.fn.datepicker2.locale_opts = [\r\n        'format',\r\n        'rtl',\r\n        'weekStart'\r\n    ];\r\n    $.fn.datepicker2.Constructor = Datepicker2;\r\n    var dates = $.fn.datepicker2.dates = {\r\n        en: {\r\n            days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n            daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\r\n            daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\r\n            months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n            monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n            today: \"Today\",\r\n            clear: \"Clear\",\r\n            titleFormat: \"MM yyyy\"\r\n        }\r\n    };\r\n\r\n    var DPGlobal = {\r\n        viewModes: [\r\n            {\r\n                names: ['days', 'month'],\r\n                clsName: 'days',\r\n                e: 'changeMonth'\r\n            },\r\n            {\r\n                names: ['months', 'year'],\r\n                clsName: 'months',\r\n                e: 'changeYear',\r\n                navStep: 1\r\n            },\r\n            {\r\n                names: ['years', 'decade'],\r\n                clsName: 'years',\r\n                e: 'changeDecade',\r\n                navStep: 10\r\n            },\r\n            {\r\n                names: ['decades', 'century'],\r\n                clsName: 'decades',\r\n                e: 'changeCentury',\r\n                navStep: 100\r\n            },\r\n            {\r\n                names: ['centuries', 'millennium'],\r\n                clsName: 'centuries',\r\n                e: 'changeMillennium',\r\n                navStep: 1000\r\n            }\r\n        ],\r\n        validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,\r\n        nonpunctuation: /[^ -\\/:-@\\u5e74\\u6708\\u65e5\\[-`{-~\\t\\n\\r]+/g,\r\n        parseFormat: function(format){\r\n            if (typeof format.toValue === 'function' && typeof format.toDisplay === 'function')\r\n                return format;\r\n            // IE treats \\0 as a string end in inputs (truncating the value),\r\n            // so it's a bad format delimiter, anyway\r\n            var separators = format.replace(this.validParts, '\\0').split('\\0'),\r\n                parts = format.match(this.validParts);\r\n            if (!separators || !separators.length || !parts || parts.length === 0){\r\n                throw new Error(\"Invalid date format.\");\r\n            }\r\n            return {separators: separators, parts: parts};\r\n        },\r\n        parseDate: function(date, format, language, assumeNearby){\r\n            if (!date)\r\n                return undefined;\r\n            if (date instanceof Date)\r\n                return date;\r\n            if (typeof format === 'string')\r\n                format = DPGlobal.parseFormat(format);\r\n            if (format.toValue)\r\n                return format.toValue(date, format, language);\r\n            var fn_map = {\r\n                    d: 'moveDay',\r\n                    m: 'moveMonth',\r\n                    w: 'moveWeek',\r\n                    y: 'moveYear'\r\n                },\r\n                dateAliases = {\r\n                    yesterday: '-1d',\r\n                    today: '+0d',\r\n                    tomorrow: '+1d'\r\n                },\r\n                parts, part, dir, i, fn;\r\n            if (date in dateAliases){\r\n                date = dateAliases[date];\r\n            }\r\n            if (/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/i.test(date)){\r\n                parts = date.match(/([\\-+]\\d+)([dmwy])/gi);\r\n                date = new Date();\r\n                for (i=0; i < parts.length; i++){\r\n                    part = parts[i].match(/([\\-+]\\d+)([dmwy])/i);\r\n                    dir = Number(part[1]);\r\n                    fn = fn_map[part[2].toLowerCase()];\r\n                    date = Datepicker2.prototype[fn](date, dir);\r\n                }\r\n                return Datepicker2.prototype._zero_utc_time(date);\r\n            }\r\n\r\n            parts = date && date.match(this.nonpunctuation) || [];\r\n\r\n            function applyNearbyYear(year, threshold){\r\n                if (threshold === true)\r\n                    threshold = 10;\r\n\r\n                // if year is 2 digits or less, than the user most likely is trying to get a recent century\r\n                if (year < 100){\r\n                    year += 2000;\r\n                    // if the new year is more than threshold years in advance, use last century\r\n                    if (year > ((new Date()).getFullYear()+threshold)){\r\n                        year -= 100;\r\n                    }\r\n                }\r\n\r\n                return year;\r\n            }\r\n\r\n            var parsed = {},\r\n                setters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],\r\n                setters_map = {\r\n                    yyyy: function(d,v){\r\n                        return d.setUTCFullYear(assumeNearby ? applyNearbyYear(v, assumeNearby) : v);\r\n                    },\r\n                    m: function(d,v){\r\n                        if (isNaN(d))\r\n                            return d;\r\n                        v -= 1;\r\n                        while (v < 0) v += 12;\r\n                        v %= 12;\r\n                        d.setUTCMonth(v);\r\n                        while (d.getUTCMonth() !== v)\r\n                            d.setUTCDate(d.getUTCDate()-1);\r\n                        return d;\r\n                    },\r\n                    d: function(d,v){\r\n                        return d.setUTCDate(v);\r\n                    }\r\n                },\r\n                val, filtered;\r\n            setters_map['yy'] = setters_map['yyyy'];\r\n            setters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\r\n            setters_map['dd'] = setters_map['d'];\r\n            date = UTCToday();\r\n            var fparts = format.parts.slice();\r\n            // Remove noop parts\r\n            if (parts.length !== fparts.length){\r\n                fparts = $(fparts).filter(function(i,p){\r\n                    return $.inArray(p, setters_order) !== -1;\r\n                }).toArray();\r\n            }\r\n            // Process remainder\r\n            function match_part(){\r\n                var m = this.slice(0, parts[i].length),\r\n                    p = parts[i].slice(0, m.length);\r\n                return m.toLowerCase() === p.toLowerCase();\r\n            }\r\n            if (parts.length === fparts.length){\r\n                var cnt;\r\n                for (i=0, cnt = fparts.length; i < cnt; i++){\r\n                    val = parseInt(parts[i], 10);\r\n                    part = fparts[i];\r\n                    if (isNaN(val)){\r\n                        switch (part){\r\n                            case 'MM':\r\n                                filtered = $(dates[language].months).filter(match_part);\r\n                                val = $.inArray(filtered[0], dates[language].months) + 1;\r\n                                break;\r\n                            case 'M':\r\n                                filtered = $(dates[language].monthsShort).filter(match_part);\r\n                                val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\r\n                                break;\r\n                        }\r\n                    }\r\n                    parsed[part] = val;\r\n                }\r\n                var _date, s;\r\n                for (i=0; i < setters_order.length; i++){\r\n                    s = setters_order[i];\r\n                    if (s in parsed && !isNaN(parsed[s])){\r\n                        _date = new Date(date);\r\n                        setters_map[s](_date, parsed[s]);\r\n                        if (!isNaN(_date))\r\n                            date = _date;\r\n                    }\r\n                }\r\n            }\r\n            return date;\r\n        },\r\n        formatDate: function(date, format, language){\r\n            if (!date)\r\n                return '';\r\n            if (typeof format === 'string')\r\n                format = DPGlobal.parseFormat(format);\r\n            if (format.toDisplay)\r\n                return format.toDisplay(date, format, language);\r\n            var val = {\r\n                d: date.getUTCDate(),\r\n                D: dates[language].daysShort[date.getUTCDay()],\r\n                DD: dates[language].days[date.getUTCDay()],\r\n                m: date.getUTCMonth() + 1,\r\n                M: dates[language].monthsShort[date.getUTCMonth()],\r\n                MM: dates[language].months[date.getUTCMonth()],\r\n                yy: date.getUTCFullYear().toString().substring(2),\r\n                yyyy: date.getUTCFullYear()\r\n            };\r\n            val.dd = (val.d < 10 ? '0' : '') + val.d;\r\n            val.mm = (val.m < 10 ? '0' : '') + val.m;\r\n            date = [];\r\n            var seps = $.extend([], format.separators);\r\n            for (var i=0, cnt = format.parts.length; i <= cnt; i++){\r\n                if (seps.length)\r\n                    date.push(seps.shift());\r\n                date.push(val[format.parts[i]]);\r\n            }\r\n            return date.join('');\r\n        },\r\n        headTemplate: '<thead>'+\r\n            '<tr>'+\r\n            '<th colspan=\"7\" class=\"datepicker2-title\"></th>'+\r\n            '</tr>'+\r\n            '<tr>'+\r\n            '<th class=\"prev\">'+defaults.templates.leftArrow+'</th>'+\r\n            '<th colspan=\"5\" class=\"datepicker2-switch\"></th>'+\r\n            '<th class=\"next\">'+defaults.templates.rightArrow+'</th>'+\r\n            '</tr>'+\r\n            '</thead>',\r\n        contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\r\n        footTemplate: '<tfoot>'+\r\n            '<tr>'+\r\n            '<th colspan=\"7\" class=\"today\"></th>'+\r\n            '</tr>'+\r\n            '<tr>'+\r\n            '<th colspan=\"7\" class=\"clear\"></th>'+\r\n            '</tr>'+\r\n            '</tfoot>'\r\n    };\r\n    DPGlobal.template = '<div class=\"datepicker2\">'+\r\n        '<div class=\"datepicker2-days\">'+\r\n        '<table class=\"table-condensed\">'+\r\n        DPGlobal.headTemplate+\r\n        '<tbody></tbody>'+\r\n        DPGlobal.footTemplate+\r\n        '</table>'+\r\n        '</div>'+\r\n        '<div class=\"datepicker2-months\">'+\r\n        '<table class=\"table-condensed\">'+\r\n        DPGlobal.headTemplate+\r\n        DPGlobal.contTemplate+\r\n        DPGlobal.footTemplate+\r\n        '</table>'+\r\n        '</div>'+\r\n        '<div class=\"datepicker2-years\">'+\r\n        '<table class=\"table-condensed\">'+\r\n        DPGlobal.headTemplate+\r\n        DPGlobal.contTemplate+\r\n        DPGlobal.footTemplate+\r\n        '</table>'+\r\n        '</div>'+\r\n        '<div class=\"datepicker2-decades\">'+\r\n        '<table class=\"table-condensed\">'+\r\n        DPGlobal.headTemplate+\r\n        DPGlobal.contTemplate+\r\n        DPGlobal.footTemplate+\r\n        '</table>'+\r\n        '</div>'+\r\n        '<div class=\"datepicker2-centuries\">'+\r\n        '<table class=\"table-condensed\">'+\r\n        DPGlobal.headTemplate+\r\n        DPGlobal.contTemplate+\r\n        DPGlobal.footTemplate+\r\n        '</table>'+\r\n        '</div>'+\r\n        '</div>';\r\n\r\n    $.fn.datepicker2.DPGlobal = DPGlobal;\r\n\r\n\r\n    /* DATEPICKER NO CONFLICT\r\n    * =================== */\r\n\r\n    $.fn.datepicker2.noConflict = function(){\r\n        $.fn.datepicker2 = old;\r\n        return this;\r\n    };\r\n\r\n    /* DATEPICKER VERSION\r\n     * =================== */\r\n    $.fn.datepicker2.version = '1.9.0';\r\n\r\n    $.fn.datepicker2.deprecated = function(msg){\r\n        var console = window.console;\r\n        if (console && console.warn) {\r\n            console.warn('DEPRECATED: ' + msg);\r\n        }\r\n    };\r\n\r\n\r\n    /* DATEPICKER DATA-API\r\n    * ================== */\r\n\r\n    $(document).on(\r\n        'focus.datepicker2.data-api click.datepicker2.data-api',\r\n        '[data-provide=\"datepicker2\"]',\r\n        function(e){\r\n            var $this = $(this);\r\n            if ($this.data('datepicker2'))\r\n                return;\r\n            e.preventDefault();\r\n            // component click requires us to explicitly show it\r\n            datepicker2Plugin.call($this, 'show');\r\n        }\r\n    );\r\n    $(function(){\r\n        datepicker2Plugin.call($('[data-provide=\"datepicker2-inline\"]'));\r\n    });\r\n\r\n}));\r\n"],"names":["factory","$","undefined","UTCDate","Date","UTC","apply","arguments","UTCToday","today","getFullYear","getMonth","getDate","isUTCEquals","date1","date2","getUTCFullYear","getUTCMonth","getUTCDate","alias","method","deprecationMsg","fn","datepicker2","deprecated","this","extras","DateArray","get","i","slice","contains","d","val","valueOf","l","length","remove","splice","replace","new_array","isArray","clear","push","copy","a","extend","Datepicker2","element","options","data","_events","_secondaryEvents","_process_options","dates","viewDate","o","defaultViewDate","focusDate","isInput","is","inputField","find","component","hasClass","isInline","picker","DPGlobal","template","_check_template","templates","leftArrow","html","rightArrow","_buildEvents","_attachEvents","addClass","appendTo","rtl","calendarWeeks","attr","Number","startDate","_o","endDate","daysOfWeekDisabled","daysOfWeekHighlighted","datesDisabled","_allow_update","setViewMode","startView","fillDow","fillMonths","update","show","prototype","constructor","_resolveViewName","view","each","viewModes","viewMode","inArray","names","_resolveDaysOfWeek","daysOfWeek","split","map","tmp","match","ex","opts","lang","language","defaults","minViewMode","maxViewMode","Math","max","min","multidate","multidateSeparator","String","weekStart","weekEnd","format","parseFormat","_local_to_utc","_zero_time","parseDate","assumeNearbyYear","Infinity","plc","orientation","toLowerCase","_plc","grep","word","test","x","y","year","month","day","_applyEvents","evs","el","ch","ev","on","_unapplyEvents","off","events","keyup","proxy","e","keyCode","keydown","paste","showOnFocus","focus","click","blur","_focused_from","target","immediateUpdates","date","navArrowsClick","dayCellClick","window","resize","place","document","hide","_detachEvents","_attachSecondaryEvents","_detachSecondaryEvents","_trigger","event","altdate","local_date","_utc_to_local","trigger","type","ix","formatDate","prop","enableOnReadonly","container","navigator","msMaxTouchPoints","disableTouchKeyboard","detach","forceParse","setValue","destroy","dateString","originalEvent","clipboardData","types","getData","setDate","preventDefault","utc","local","getTime","getTimezoneOffset","_zero_utc_time","getDates","getUTCDates","selected_date","clearDates","autoclose","setDates","args","setUTCDates","setUTCDate","formatted","getFormattedDate","join","getStartDate","setStartDate","updateNavArrows","getEndDate","setEndDate","setDaysOfWeekDisabled","setDaysOfWeekHighlighted","setDatesDisabled","calendarWidth","outerWidth","calendarHeight","outerHeight","windowWidth","width","scrollTop","appendOffset","offset","parentsZindex","parents","itemZIndex","css","zIndex","zIndexOffset","parent","height","left","top","removeClass","yorient","parseInt","right","oldDates","fromArgs","dateWithinRange","updateViewDate","change","fill","showWeekDays","dowCnt","daysMin","append","localDate","monthsShort","setRange","range","getClassNames","cls","todayHighlight","dateIsDisabled","getUTCDay","_fill_yearsView","selector","cssClass","factor","startYear","endYear","beforeFn","classes","tooltip","before","step","startVal","floor","endVal","focusedVal","selected","currVal","noop","enabled","concat","text","startMonth","endMonth","todaytxt","cleartxt","titleFormat","todayDate","titleBtnVisible","todayBtn","weekOfDateIsDisabled","isNaN","clearBtn","title","prevMonth","nextMonth","setUTCFullYear","weekDay","clsName","ws","th","yth","calWeek","content","beforeShowDay","isFunction","uniqueSort","unique","toString","monthsTitle","months","end","eq","beforeShowMonth","that","moDate","beforeShowYear","beforeShowDecade","beforeShowCentury","prevIsDisabled","nextIsDisabled","toggleClass","stopPropagation","_setDate","index","setUTCMonth","timestamp","currentTarget","dir","navStep","moveMonth","_toggle_multidate","toggleActive","which","moveDay","newDate","moveWeek","new_month","new_date","mag","abs","moveYear","moveAvailableDate","newViewDate","dateChanged","keyboardNavigation","ctrlKey","shiftKey","children","filter","DateRangePicker","inputs","jquery","keepEmptyValues","datepicker2Plugin","call","dateUpdated","pickers","updateDates","updateRanges","p","updating","dp","keep_empty_values","j","k","old","option","internal_return","Array","shift","$this","elopts","prefix","out","RegExp","re_lower","_","key","opts_from_el","locopts","locale_opts","opts_from_locale","toArray","Error","Constructor","en","days","daysShort","validParts","nonpunctuation","toValue","toDisplay","separators","parts","assumeNearby","part","fn_map","m","w","dateAliases","yesterday","tomorrow","filtered","parsed","setters_order","setters_map","yyyy","v","threshold","fparts","match_part","cnt","_date","s","D","DD","M","MM","yy","substring","dd","mm","seps","headTemplate","contTemplate","footTemplate","noConflict","version","msg","console","warn","define","amd","exports","require","jQuery"],"mappings":"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"}